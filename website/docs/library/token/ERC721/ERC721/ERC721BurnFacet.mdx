---
sidebar_position: 99
title: "ERC721BurnFacet"
description: "Burn ERC721 tokens within a Compose diamond."
gitSource: "https://github.com/maxnorm/Compose/blob/5736454575f67743dd05ba6cb1265bc06d0c1422/src/token/ERC721/ERC721/ERC721BurnFacet.sol"
---

import DocSubtitle  from '@site/src/components/docs/DocSubtitle';
import Badge from '@site/src/components/ui/Badge';
import Callout from '@site/src/components/ui/Callout';
import CalloutBox from '@site/src/components/ui/CalloutBox';
import Accordion, { AccordionGroup } from '@site/src/components/ui/Accordion';
import PropertyTable from '@site/src/components/api/PropertyTable';
import ExpandableCode from '@site/src/components/code/ExpandableCode';
import CodeShowcase from '@site/src/components/code/CodeShowcase';
import RelatedDocs from '@site/src/components/docs/RelatedDocs';
import WasThisHelpful from '@site/src/components/docs/WasThisHelpful';
import LastUpdated from '@site/src/components/docs/LastUpdated';
import ReadingTime from '@site/src/components/docs/ReadingTime';
import GradientText from '@site/src/components/ui/GradientText';
import GradientButton from '@site/src/components/ui/GradientButton';

<DocSubtitle>
Burn ERC721 tokens within a Compose diamond.
</DocSubtitle>

<Callout type="info" title="Key Features">
- Allows burning of ERC721 tokens, permanently removing them from circulation.
- Emits standard `Transfer` events with `from` and `to` addresses set to the zero address, as per ERC721 standards for token destruction.
- Integrates seamlessly with the Compose diamond pattern for composable functionality.
</Callout>

## Overview

The ERC721BurnFacet provides the functionality to burn (destroy) ERC721 tokens. It interacts directly with the diamond's storage to remove tokens from the ERC721 contract's state, emitting standard ERC721 events.

---

## Storage

### ERC721Storage

<ExpandableCode language="solidity" maxLines={15} title="Definition">
{`struct ERC721Storage {
    mapping(uint256 tokenId => address owner) ownerOf;
    mapping(address owner => uint256 balance) balanceOf;
    mapping(address owner => mapping(address operator => bool approved)) isApprovedForAll;
    mapping(uint256 tokenId => address approved) approved;
}`}
</ExpandableCode>

### State Variables

<PropertyTable
  properties={[
    {
      name: "STORAGE_POSITION",
      type: "constant",
      description: "Diamond storage slot position for this module"
    }
  ]}
  showRequired={false}
/>

## Functions

### getStorage

Returns a pointer to the ERC-721 storage struct. Uses inline assembly to access the storage slot defined by STORAGE_POSITION.

<ExpandableCode language="solidity" maxLines={8}>
{`function getStorage() internal pure returns (ERC721Storage storage s);`}
</ExpandableCode>

**Returns:**

<PropertyTable
  properties={[
    {
      name: "s",
      type: "ERC721Storage",
      description: "The ERC721Storage struct in storage."
    }
  ]}
  showRequired={false}
/>

---
### burn

Burns (destroys) a token, removing it from enumeration tracking.

<ExpandableCode language="solidity" maxLines={8}>
{`function burn(uint256 _tokenId) external;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_tokenId",
      type: "uint256",
      description: "The ID of the token to burn."
    }
  ]}
  showRequired={false}
/>

## Events

<AccordionGroup>
  <Accordion title="Transfer" defaultOpen={false}>

    <div style={{marginBottom: "1rem"}}>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
{`event Transfer(address indexed _from, address indexed _to, uint256 indexed _tokenId);`}
      </ExpandableCode>
    </div>

  </Accordion>
  <Accordion title="Approval" defaultOpen={false}>

    <div style={{marginBottom: "1rem"}}>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
{`event Approval(address indexed _owner, address indexed _to, uint256 indexed _tokenId);`}
      </ExpandableCode>
    </div>

  </Accordion>
  <Accordion title="ApprovalForAll" defaultOpen={false}>

    <div style={{marginBottom: "1rem"}}>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
{`event ApprovalForAll(address indexed _owner, address indexed _operator, bool _approved);`}
      </ExpandableCode>
    </div>

  </Accordion>
</AccordionGroup>

## Errors

<AccordionGroup>
  <Accordion title="ERC721NonexistentToken" defaultOpen={false}>

    <div>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
error ERC721NonexistentToken(uint256 _tokenId);
      </ExpandableCode>
    </div>
  </Accordion>
  <Accordion title="ERC721InsufficientApproval" defaultOpen={false}>

    <div>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
error ERC721InsufficientApproval(address _operator, uint256 _tokenId);
      </ExpandableCode>
    </div>
  </Accordion>
</AccordionGroup>

## Usage Example

<ExpandableCode language="solidity" maxLines={20} title="Example Implementation">
{`pragma solidity ^0.8.30;

import {IERC721BurnFacet} from "@compose-protocol/diamond-contracts/contracts/facets/ERC721/IERC721BurnFacet.sol";
import {DiamondProxy} from "@compose-protocol/diamond-contracts/contracts/DiamondProxy.sol";

contract ERC721BurnExample {
    DiamondProxy public diamondProxy;

    // Replace with actual diamond address
    address immutable DIAMOND_ADDRESS = address(0x1234567890abcdef);

    constructor() {
        diamondProxy = DiamondProxy(DIAMOND_ADDRESS);
    }

    function burnToken(uint256 tokenId) public {
        bytes4 selector = IERC721BurnFacet.burn.selector;
        // abi.encodeWithSignature is not used here as it is a direct call to the diamond proxy
        // The diamond proxy will route the call to the correct facet based on the selector
        (bool success, bytes memory data) = diamondProxy.diamondCall(abi.encodeWithSelector(selector, tokenId));
        require(success, "ERC721BurnFacet: burn failed");
    }
}`}
</ExpandableCode>

## Best Practices

<Callout type="tip" title="Best Practice">
- Ensure the `ERC721BurnFacet` is correctly registered with the diamond proxy.
- Verify that the caller has the necessary approvals or ownership to burn the specified token before invoking the `burn` function.
</Callout>

## Security Considerations

<Callout type="warning" title="Security">
The `burn` function must be called by an address that is the owner of the token or has been explicitly approved to burn the token. Ensure proper access control mechanisms are in place at the diamond level or within the calling contract to enforce these conditions. The facet itself does not implement additional access control beyond what is expected by the ERC721 standard.
</Callout>

<div style={{marginTop: "3rem", paddingTop: "2rem", borderTop: "1px solid var(--ifm-color-emphasis-200)"}}>
  <WasThisHelpful pageId="ERC721BurnFacet" />
</div>

<LastUpdated date="2025-12-21T22:05:51.684Z" />
