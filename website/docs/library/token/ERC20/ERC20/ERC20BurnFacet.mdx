---
sidebar_position: 99
title: "ERC20BurnFacet"
description: "Burn ERC20 tokens within a Compose diamond."
gitSource: "https://github.com/maxnorm/Compose/blob/5736454575f67743dd05ba6cb1265bc06d0c1422/src/token/ERC20/ERC20/ERC20BurnFacet.sol"
---

import DocSubtitle  from '@site/src/components/docs/DocSubtitle';
import Badge from '@site/src/components/ui/Badge';
import Callout from '@site/src/components/ui/Callout';
import CalloutBox from '@site/src/components/ui/CalloutBox';
import Accordion, { AccordionGroup } from '@site/src/components/ui/Accordion';
import PropertyTable from '@site/src/components/api/PropertyTable';
import ExpandableCode from '@site/src/components/code/ExpandableCode';
import CodeShowcase from '@site/src/components/code/CodeShowcase';
import RelatedDocs from '@site/src/components/docs/RelatedDocs';
import WasThisHelpful from '@site/src/components/docs/WasThisHelpful';
import LastUpdated from '@site/src/components/docs/LastUpdated';
import ReadingTime from '@site/src/components/docs/ReadingTime';
import GradientText from '@site/src/components/ui/GradientText';
import GradientButton from '@site/src/components/ui/GradientButton';

<DocSubtitle>
Burn ERC20 tokens within a Compose diamond.
</DocSubtitle>

<Callout type="info" title="Key Features">
- Allows burning of ERC20 tokens from the caller's balance.
- Supports burning ERC20 tokens from another account using allowances.
- Emits `Transfer` events to the zero address upon successful burns, conforming to ERC20 standards.
- Integrates with the Compose diamond storage pattern.
</Callout>

## Overview

The ERC20BurnFacet provides the functionality to burn ERC20 tokens directly within a Compose diamond. It allows users to decrease their own token balances or burn tokens on behalf of others, provided they have the necessary allowances. This facet integrates with the diamond's storage pattern to manage ERC20 state.

---

## Storage

### ERC20Storage

<ExpandableCode language="solidity" maxLines={15} title="Definition">
{`struct ERC20Storage {
    mapping(address owner => uint256 balance) balanceOf;
    uint256 totalSupply;
    mapping(address owner => mapping(address spender => uint256 allowance)) allowance;
}`}
</ExpandableCode>

### State Variables

<PropertyTable
  properties={[
    {
      name: "STORAGE_POSITION",
      type: "constant",
      description: "Diamond storage slot position for this module"
    }
  ]}
  showRequired={false}
/>

## Functions

### getStorage

Returns the ERC20 storage struct from the predefined diamond storage slot. Uses inline assembly to set the storage slot reference.

<ExpandableCode language="solidity" maxLines={8}>
{`function getStorage() internal pure returns (ERC20Storage storage s);`}
</ExpandableCode>

**Returns:**

<PropertyTable
  properties={[
    {
      name: "s",
      type: "ERC20Storage",
      description: "The ERC20 storage struct reference."
    }
  ]}
  showRequired={false}
/>

---
### burn

Burns (destroys) a specific amount of tokens from the caller's balance. Emits a Transfer event to the zero address.

<ExpandableCode language="solidity" maxLines={8}>
{`function burn(uint256 _value) external;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_value",
      type: "uint256",
      description: "The amount of tokens to burn."
    }
  ]}
  showRequired={false}
/>

---
### burnFrom

Burns tokens from another account, deducting from the caller's allowance. Emits a Transfer event to the zero address.

<ExpandableCode language="solidity" maxLines={8}>
{`function burnFrom(address _account, uint256 _value) external;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_account",
      type: "address",
      description: "The address whose tokens will be burned."
    },
    {
      name: "_value",
      type: "uint256",
      description: "The amount of tokens to burn."
    }
  ]}
  showRequired={false}
/>

## Events

<AccordionGroup>
  <Accordion title="Transfer" defaultOpen={false}>
    <div style={{marginBottom: "1rem"}}>
      Emitted when tokens are transferred between two addresses.
    </div>

    <div style={{marginBottom: "1rem"}}>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
{`event Transfer(address indexed _from, address indexed _to, uint256 _value);`}
      </ExpandableCode>
    </div>

    <div style={{marginBottom: "1rem"}}>
      <strong>Parameters:</strong>
      <PropertyTable
        properties={[
          {
            name: "_from",
            type: "address",
            description: "Address sending the tokens."
          },
          {
            name: "_to",
            type: "address",
            description: "Address receiving the tokens."
          },
          {
            name: "_value",
            type: "uint256",
            description: "Amount of tokens transferred."
          }
        ]}
        showRequired={false}
      />
    </div>
  </Accordion>
</AccordionGroup>

## Errors

<AccordionGroup>
  <Accordion title="ERC20InsufficientBalance" defaultOpen={false}>
    <div style={{marginBottom: "1rem"}}>
      Thrown when an account has insufficient balance for a transfer or burn.
    </div>

    <div>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
error ERC20InsufficientBalance(address _sender, uint256 _balance, uint256 _needed);
      </ExpandableCode>
    </div>
  </Accordion>
  <Accordion title="ERC20InsufficientAllowance" defaultOpen={false}>
    <div style={{marginBottom: "1rem"}}>
      Thrown when a spender tries to use more than the approved allowance.
    </div>

    <div>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
error ERC20InsufficientAllowance(address _spender, uint256 _allowance, uint256 _needed);
      </ExpandableCode>
    </div>
  </Accordion>
</AccordionGroup>

## Usage Example

<ExpandableCode language="solidity" maxLines={20} title="Example Implementation">
{`pragma solidity ^0.8.30;

import {IERC20BurnFacet} from "@compose/contracts/facets/ERC20/IERC20BurnFacet.sol";
import {DiamondABI} from "@compose/contracts/DiamondABI.sol";

contract ERC20BurnConsumer {
    address immutable DIAMOND_ADDRESS;

    constructor(address _diamondAddress) {
        DIAMOND_ADDRESS = _diamondAddress;
    }

    function burnMyTokens(address _tokenAddress, uint256 _amount) external {
        bytes4 selector = IERC20BurnFacet.burn.selector;
        (bool success, bytes memory data) = DIAMOND_ADDRESS.call(abi.encodeWithSelector(selector, _tokenAddress, _amount));
        require(success, "Burn failed");
    }

    function burnTokensFromOthers(address _tokenAddress, address _from, uint256 _amount) external {
        bytes4 selector = IERC20BurnFacet.burnFrom.selector;
        (bool success, bytes memory data) = DIAMOND_ADDRESS.call(abi.encodeWithSelector(selector, _tokenAddress, _from, _amount));
        require(success, "Burn from failed");
    }
}`}
</ExpandableCode>

## Best Practices

<Callout type="tip" title="Best Practice">
- Ensure the ERC20BurnFacet is correctly added to your diamond and its functions are properly routed.
- Manage token allowances carefully before calling `burnFrom` to prevent unintended token loss.
- The `getStorage` function can be used to inspect ERC20 storage directly if needed, but direct manipulation is not recommended.
</Callout>

## Security Considerations

<Callout type="warning" title="Security">
This facet relies on the underlying ERC20 token's transfer logic and allowance mechanism. Ensure the token contract itself is secure. The `burnFrom` function requires the caller to have sufficient allowance, and the `burn` function requires the caller to have sufficient balance. Incorrect allowances or balances will revert with `ERC20InsufficientAllowance` or `ERC20InsufficientBalance` respectively. Reentrancy is not a concern as these are state-mutating calls that do not yield control back to external contracts before state changes are finalized.
</Callout>

<div style={{marginTop: "3rem", paddingTop: "2rem", borderTop: "1px solid var(--ifm-color-emphasis-200)"}}>
  <WasThisHelpful pageId="ERC20BurnFacet" />
</div>

<LastUpdated date="2025-12-21T22:05:12.761Z" />
