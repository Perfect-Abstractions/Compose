---
sidebar_position: 99
title: "AccessControlPausableMod"
description: "Manage role-based access control with pausing capabilities."
gitSource: "https://github.com/maxnorm/Compose/blob/fc8e8677d3c3fe32a459f173c58ec546dfcb9e13/src/access/AccessControlPausable/AccessControlPausableMod.sol"
---

import DocSubtitle  from '@site/src/components/docs/DocSubtitle';
import Badge from '@site/src/components/ui/Badge';
import Callout from '@site/src/components/ui/Callout';
import CalloutBox from '@site/src/components/ui/CalloutBox';
import Accordion, { AccordionGroup } from '@site/src/components/ui/Accordion';
import PropertyTable from '@site/src/components/api/PropertyTable';
import ExpandableCode from '@site/src/components/code/ExpandableCode';
import CodeShowcase from '@site/src/components/code/CodeShowcase';
import RelatedDocs from '@site/src/components/docs/RelatedDocs';
import WasThisHelpful from '@site/src/components/docs/WasThisHelpful';
import LastUpdated from '@site/src/components/docs/LastUpdated';
import ReadingTime from '@site/src/components/docs/ReadingTime';
import GradientText from '@site/src/components/ui/GradientText';
import GradientButton from '@site/src/components/ui/GradientButton';

<DocSubtitle>
Manage role-based access control with pausing capabilities.
</DocSubtitle>

<Callout type="info" title="Key Features">
- Role-specific pausing: allows granular control over operational suspension.
- Composable with existing access control mechanisms.
- Reverts with specific errors (`AccessControlRolePaused`, `AccessControlUnauthorizedAccount`) for clear error handling.
</Callout>

<Callout type="info" title="Module Usage">
This module provides internal functions for use in your custom facets. Import it to access shared logic and storage.
</Callout>

## Overview

This module extends diamond access control by introducing role-specific pausing. It allows administrators to temporarily halt operations for specific roles, ensuring critical functions can be suspended during emergencies or maintenance without affecting the entire diamond. This composition pattern enhances security and operational flexibility.

---

## Storage

### AccessControlPausableStorage

<ExpandableCode language="solidity" maxLines={15} title="Definition">
{`struct AccessControlPausableStorage {
mapping(bytes32 role => bool paused) pausedRoles;
}`}
</ExpandableCode>

---
### AccessControlStorage

<ExpandableCode language="solidity" maxLines={15} title="Definition">
{`struct AccessControlStorage {
mapping(address account => mapping(bytes32 role => bool hasRole)) hasRole;
mapping(bytes32 role => bytes32 adminRole) adminRole;
}`}
</ExpandableCode>

### State Variables

<PropertyTable
  properties={[
    {
      name: "ACCESS_CONTROL_STORAGE_POSITION",
      type: "bytes32",
      description: "Diamond storage slot position for this module (Value: `keccak256(\"compose.accesscontrol\")`)"
    },
    {
      name: "PAUSABLE_STORAGE_POSITION",
      type: "bytes32",
      description: "Diamond storage slot position for this module (Value: `keccak256(\"compose.accesscontrol.pausable\")`)"
    }
  ]}
  showRequired={false}
/>

## Functions

### getAccessControlStorage

Returns the storage for AccessControl.

<ExpandableCode language="solidity" maxLines={8}>
{`function getAccessControlStorage() pure returns (AccessControlStorage storage s);`}
</ExpandableCode>

**Returns:**

<PropertyTable
  properties={[
    {
      name: "s",
      type: "AccessControlStorage",
      description: "The AccessControl storage struct."
    }
  ]}
  showRequired={false}
/>

---
### getStorage

Returns the storage for AccessControlPausable.

<ExpandableCode language="solidity" maxLines={8}>
{`function getStorage() pure returns (AccessControlPausableStorage storage s);`}
</ExpandableCode>

**Returns:**

<PropertyTable
  properties={[
    {
      name: "s",
      type: "AccessControlPausableStorage",
      description: "The AccessControlPausable storage struct."
    }
  ]}
  showRequired={false}
/>

---
### isRolePaused

function to check if a role is paused.

<ExpandableCode language="solidity" maxLines={8}>
{`function isRolePaused(bytes32 _role) view returns (bool);`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_role",
      type: "bytes32",
      description: "The role to check."
    }
  ]}
  showRequired={false}
/>

**Returns:**

<PropertyTable
  properties={[
    {
      name: "-",
      type: "bool",
      description: "True if the role is paused, false otherwise."
    }
  ]}
  showRequired={false}
/>

---
### pauseRole

function to pause a role.

<ExpandableCode language="solidity" maxLines={8}>
{`function pauseRole(bytes32 _role) ;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_role",
      type: "bytes32",
      description: "The role to pause."
    }
  ]}
  showRequired={false}
/>

---
### requireRoleNotPaused

function to check if an account has a role and if the role is not paused. **Notes:** - Reverts with AccessControlUnauthorizedAccount If the account does not have the role. - Reverts with AccessControlRolePaused If the role is paused.

<ExpandableCode language="solidity" maxLines={8}>
{`function requireRoleNotPaused(bytes32 _role, address _account) view;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_role",
      type: "bytes32",
      description: "The role to check."
    },
    {
      name: "_account",
      type: "address",
      description: "The account to check the role for."
    }
  ]}
  showRequired={false}
/>

---
### unpauseRole

function to unpause a role.

<ExpandableCode language="solidity" maxLines={8}>
{`function unpauseRole(bytes32 _role) ;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_role",
      type: "bytes32",
      description: "The role to unpause."
    }
  ]}
  showRequired={false}
/>

## Events

<AccordionGroup>
  <Accordion title="RolePaused" defaultOpen={false}>
    <div style={{marginBottom: "1rem"}}>
      Event emitted when a role is paused.
    </div>

    <div style={{marginBottom: "1rem"}}>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
{`event RolePaused(bytes32 indexed _role, address indexed _account);`}
      </ExpandableCode>
    </div>

    <div style={{marginBottom: "1rem"}}>
      <strong>Parameters:</strong>
      <PropertyTable
        properties={[
          {
            name: "_role",
            type: "bytes32",
            description: "The role that was paused."
          },
          {
            name: "_account",
            type: "address",
            description: "The account that paused the role."
          }
        ]}
        showRequired={false}
      />
    </div>
  </Accordion>
  <Accordion title="RoleUnpaused" defaultOpen={false}>
    <div style={{marginBottom: "1rem"}}>
      Event emitted when a role is unpaused.
    </div>

    <div style={{marginBottom: "1rem"}}>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
{`event RoleUnpaused(bytes32 indexed _role, address indexed _account);`}
      </ExpandableCode>
    </div>

    <div style={{marginBottom: "1rem"}}>
      <strong>Parameters:</strong>
      <PropertyTable
        properties={[
          {
            name: "_role",
            type: "bytes32",
            description: "The role that was unpaused."
          },
          {
            name: "_account",
            type: "address",
            description: "The account that unpaused the role."
          }
        ]}
        showRequired={false}
      />
    </div>
  </Accordion>
</AccordionGroup>

## Errors

<AccordionGroup>
  <Accordion title="AccessControlRolePaused" defaultOpen={false}>
    <div style={{marginBottom: "1rem"}}>
      Thrown when a role is paused and an operation requiring that role is attempted.
    </div>

    <div>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
error AccessControlRolePaused(bytes32 _role);
      </ExpandableCode>
    </div>
  </Accordion>
  <Accordion title="AccessControlUnauthorizedAccount" defaultOpen={false}>
    <div style={{marginBottom: "1rem"}}>
      Thrown when the account does not have a specific role.
    </div>

    <div>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
error AccessControlUnauthorizedAccount(address _account, bytes32 _role);
      </ExpandableCode>
    </div>
  </Accordion>
</AccordionGroup>

## Usage Example

<ExpandableCode language="solidity" maxLines={20} title="Example Implementation">
{`pragma solidity ^0.8.30;

import {IAccessControlPausableMod} from "@compose/modules/access-control-pausable/IAccessControlPausableMod.sol";

contract MyFacet {
    IAccessControlPausableMod public constant ACCESS_CONTROL_PAUSABLE_MOD = IAccessControlPausableMod(0xaddress); // Replace with actual module address

    bytes32 public constant PAUSER_ROLE = keccak256("PAUSER_ROLE");
    bytes32 public constant OPERATOR_ROLE = keccak256("OPERATOR_ROLE");

    function pauseMyFeature() external {
        // Ensure the caller has the PAUSER_ROLE and the role is not paused
        ACCESS_CONTROL_PAUSABLE_MOD.requireRoleNotPaused(msg.sender, PAUSER_ROLE);
        // If the role is not paused, proceed with pausing the feature
        ACCESS_CONTROL_PAUSABLE_MOD.pauseRole(PAUSER_ROLE);
    }

    function performCriticalOperation() external {
        // Ensure the caller has the OPERATOR_ROLE and the role is not paused
        ACCESS_CONTROL_PAUSABLE_MOD.requireRoleNotPaused(msg.sender, OPERATOR_ROLE);
        // Perform the critical operation
    }
}`}
</ExpandableCode>

## Best Practices

<Callout type="tip" title="Best Practice">
- Use `requireRoleNotPaused` to enforce role presence and ensure the role is not paused before executing sensitive operations.
- Grant the `PAUSER_ROLE` only to trusted administrative accounts.
- Monitor `RolePaused` and `RoleUnpaused` events to track state changes.
</Callout>

## Integration Notes

<Callout type="success" title="Shared Storage">
This module relies on the underlying Access Control module's storage for role management. The `AccessControlPausableMod` adds its own state to manage paused roles. Facets interacting with this module should be aware that calls to `requireRoleNotPaused` will check both role membership and the paused status of that role. The module's functions are designed to be called directly by facets using the module's interface.
</Callout>

<div style={{marginTop: "3rem", paddingTop: "2rem", borderTop: "1px solid var(--ifm-color-emphasis-200)"}}>
  <WasThisHelpful pageId="AccessControlPausableMod" />
</div>

<LastUpdated date="2025-12-21T21:24:36.879Z" />
