---
sidebar_position: 2
title: "AccessControlPausableFacet"
description: "Manages roles, pausing, and access control within a diamond."
gitSource: "https://github.com/Perfect-Abstractions/Compose/tree/main/src/access/AccessControlPausable/AccessControlPausableFacet.sol"
---

import DocSubtitle  from '@site/src/components/docs/DocSubtitle';
import Badge from '@site/src/components/ui/Badge';
import Callout from '@site/src/components/ui/Callout';
import CalloutBox from '@site/src/components/ui/CalloutBox';
import Accordion, { AccordionGroup } from '@site/src/components/ui/Accordion';
import PropertyTable from '@site/src/components/api/PropertyTable';
import ExpandableCode from '@site/src/components/code/ExpandableCode';
import CodeShowcase from '@site/src/components/code/CodeShowcase';
import RelatedDocs from '@site/src/components/docs/RelatedDocs';
import WasThisHelpful from '@site/src/components/docs/WasThisHelpful';
import LastUpdated from '@site/src/components/docs/LastUpdated';
import ReadingTime from '@site/src/components/docs/ReadingTime';
import GradientText from '@site/src/components/ui/GradientText';
import GradientButton from '@site/src/components/ui/GradientButton';

<DocSubtitle>
Manages roles, pausing, and access control within a diamond.
</DocSubtitle>

<Callout type="info" title="Key Features">
- Role-specific pausing: Temporarily disable specific roles without affecting others.
- Admin-controlled pauses: Only the designated administrator for a role can pause or unpause it.
- Integrated checks: `requireRoleNotPaused` provides a composable way to enforce pause states.
</Callout>

## Overview

This facet extends Compose's access control by adding role-specific pausing capabilities. It allows administrators to temporarily halt operations for specific roles, enhancing security and control during critical periods. The facet provides functions to check pause status, pause, and unpause roles, ensuring operations only proceed when roles are active.

---

## Storage

### AccessControlStorage

<ExpandableCode language="solidity" maxLines={15} title="Definition">
{`struct AccessControlStorage {
    mapping(address account => mapping(bytes32 role => bool hasRole)) hasRole;
    mapping(bytes32 role => bytes32 adminRole) adminRole;
}`}
</ExpandableCode>

---
### AccessControlPausableStorage

<ExpandableCode language="solidity" maxLines={15} title="Definition">
{`struct AccessControlPausableStorage {
    mapping(bytes32 role => bool paused) pausedRoles;
}`}
</ExpandableCode>

### State Variables

<PropertyTable
  properties={[
    {
      name: "ACCESS_CONTROL_STORAGE_POSITION",
      type: "bytes32",
      description: "Diamond storage slot position for this module (Value: `keccak256(\"compose.accesscontrol\")`)"
    },
    {
      name: "PAUSABLE_STORAGE_POSITION",
      type: "bytes32",
      description: "Diamond storage slot position for this module (Value: `keccak256(\"compose.accesscontrol.pausable\")`)"
    }
  ]}
  showRequired={false}
/>

## Functions

### isRolePaused

Returns if a role is paused.

<ExpandableCode language="solidity" maxLines={8}>
{`function isRolePaused(bytes32 _role) external view returns (bool);`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_role",
      type: "bytes32",
      description: "The role to check."
    }
  ]}
  showRequired={false}
/>

**Returns:**

<PropertyTable
  properties={[
    {
      name: "-",
      type: "bool",
      description: "True if the role is paused, false otherwise."
    }
  ]}
  showRequired={false}
/>

---
### pauseRole

Temporarily disables a role, preventing all accounts from using it. Only the admin of the role can pause it. Emits a RolePaused event. Reverts with AccessControlUnauthorizedAccount If the caller is not the admin of the role.

<ExpandableCode language="solidity" maxLines={8}>
{`function pauseRole(bytes32 _role) external;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_role",
      type: "bytes32",
      description: "The role to pause."
    }
  ]}
  showRequired={false}
/>

---
### unpauseRole

Re-enables a role that was previously paused. Only the admin of the role can unpause it. Emits a RoleUnpaused event. Reverts with AccessControlUnauthorizedAccount If the caller is not the admin of the role.

<ExpandableCode language="solidity" maxLines={8}>
{`function unpauseRole(bytes32 _role) external;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_role",
      type: "bytes32",
      description: "The role to unpause."
    }
  ]}
  showRequired={false}
/>

---
### requireRoleNotPaused

Checks if an account has a role and if the role is not paused. - Reverts with AccessControlUnauthorizedAccount If the account does not have the role. - Reverts with AccessControlRolePaused If the role is paused.

<ExpandableCode language="solidity" maxLines={8}>
{`function requireRoleNotPaused(bytes32 _role, address _account) external view;`}
</ExpandableCode>

**Parameters:**

<PropertyTable
  properties={[
    {
      name: "_role",
      type: "bytes32",
      description: "The role to check."
    },
    {
      name: "_account",
      type: "address",
      description: "The account to check the role for."
    }
  ]}
  showRequired={false}
/>

## Events

<AccordionGroup>
  <Accordion title="RolePaused" defaultOpen={false}>
    <div style={{marginBottom: "1rem"}}>
      Event emitted when a role is paused.
    </div>

    <div style={{marginBottom: "1rem"}}>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
{`event RolePaused(bytes32 indexed _role, address indexed _account);`}
      </ExpandableCode>
    </div>

    <div style={{marginBottom: "1rem"}}>
      <strong>Parameters:</strong>
      <PropertyTable
        properties={[
          {
            name: "_role",
            type: "bytes32",
            description: "The role that was paused."
          },
          {
            name: "_account",
            type: "address",
            description: "The account that paused the role."
          }
        ]}
        showRequired={false}
      />
    </div>
  </Accordion>
  <Accordion title="RoleUnpaused" defaultOpen={false}>
    <div style={{marginBottom: "1rem"}}>
      Event emitted when a role is unpaused.
    </div>

    <div style={{marginBottom: "1rem"}}>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
{`event RoleUnpaused(bytes32 indexed _role, address indexed _account);`}
      </ExpandableCode>
    </div>

    <div style={{marginBottom: "1rem"}}>
      <strong>Parameters:</strong>
      <PropertyTable
        properties={[
          {
            name: "_role",
            type: "bytes32",
            description: "The role that was unpaused."
          },
          {
            name: "_account",
            type: "address",
            description: "The account that unpaused the role."
          }
        ]}
        showRequired={false}
      />
    </div>
  </Accordion>
</AccordionGroup>

## Errors

<AccordionGroup>
  <Accordion title="AccessControlUnauthorizedAccount" defaultOpen={false}>
    <div style={{marginBottom: "1rem"}}>
      Thrown when the account does not have a specific role.
    </div>

    <div>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
error AccessControlUnauthorizedAccount(address _account, bytes32 _role);
      </ExpandableCode>
    </div>
  </Accordion>
  <Accordion title="AccessControlRolePaused" defaultOpen={false}>
    <div style={{marginBottom: "1rem"}}>
      Thrown when a role is paused and an operation requiring that role is attempted.
    </div>

    <div>
      <strong>Signature:</strong>
      <ExpandableCode language="solidity" maxLines={5}>
error AccessControlRolePaused(bytes32 _role);
      </ExpandableCode>
    </div>
  </Accordion>
</AccordionGroup>

## Usage Example

<ExpandableCode language="solidity" maxLines={20} title="Example Implementation">
{`pragma solidity ^0.8.30;

import {IComposeDiamond} from "@compose-protocol/diamond-contracts/contracts/interfaces/IComposeDiamond.sol";
import {AccessControlPausableFacet} from "@compose-protocol/diamond-contracts/contracts/facets/AccessControl/AccessControlPausableFacet.sol";

contract Deployer {
    IComposeDiamond public diamondProxy;

    function deployDiamond() public {
        // ... diamond deployment logic ...
        // diamondProxy = IComposeDiamond(deployedDiamondAddress);
    }

    function grantAndPauseRole() public {
        // Assuming ADMIN_ROLE and TARGET_ROLE selectors are defined
        bytes4 pauseRoleSelector = AccessControlPausableFacet.pauseRole.selector;
        bytes4 grantRoleSelector = /* selector for grantRole function in AccessControl facet */ ;

        // Grant a role first (assuming AccessControl facet is already added)
        // diamondProxy.execute(grantRoleSelector, abi.encode(TARGET_ROLE, msg.sender));

        // Pause the role using AccessControlPausableFacet
        diamondProxy.execute(pauseRoleSelector, abi.encode(TARGET_ROLE));
    }

    function isRoleActive(bytes32 _role) public view returns (bool) {
        bytes4 isRolePausedSelector = AccessControlPausableFacet.isRolePaused.selector;
        (bool paused) = abi.decode(diamondProxy.call(isRolePausedSelector, abi.encode(_role)), (bool));
        return !paused;
    }
}`}
</ExpandableCode>

## Best Practices

<Callout type="tip" title="Best Practice">
- Integrate this facet into your diamond to enable role-specific pausing. Ensure the AccessControl facet is also deployed to manage role assignments.
- Utilize the `requireRoleNotPaused` internal helper within other facets to enforce pause states before executing sensitive operations.
- Store role identifiers and pause states within the diamond's storage via this facet's functions, ensuring consistent state management.
</Callout>

## Security Considerations

<Callout type="warning" title="Security">
Access to `pauseRole` and `unpauseRole` functions is restricted to the admin of the specific role, preventing unauthorized pausing. Reentrancy is not a direct concern as these functions modify state and do not make external calls. Ensure that the admin role itself is properly secured to prevent accidental or malicious pausing of critical functionalities.
</Callout>

<div style={{marginTop: "3rem", paddingTop: "2rem", borderTop: "1px solid var(--ifm-color-emphasis-200)"}}>
  <RelatedDocs
    items={[
      {
        title: "AccessControlPausableMod",
        href: "/docs/library/access/AccessControlPausable",
        description: "Module used by AccessControlPausableFacet",
        icon: "ðŸ“¦"
      },
      {
        title: "OwnerTwoStepsFacet",
        href: "/docs/library/access/OwnerTwoSteps",
        description: "Related facet in access",
        icon: "ðŸ’Ž"
      }
    ]}
  />
</div>

<div style={{marginTop: "3rem", paddingTop: "2rem", borderTop: "1px solid var(--ifm-color-emphasis-200)"}}>
  <WasThisHelpful pageId="AccessControlPausableFacet" />
</div>

<LastUpdated date="2025-12-28T04:47:07.622Z" />
