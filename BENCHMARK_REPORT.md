

# Diamond Loupe Gas Benchmark Report
    
## Usage


Run the following command to execute the benchmark and generate the .csv results:
```bash
forge script script/LoupeBenchmark.s.sol --gas-limit 1000000000000000000
```

Use a very high gas limit to avoid out-of-gas errors during execution.


Then, convert the CSV results into a Markdown report (BENCHMARK_REPORT.md) with:

```bash
python3 gen_benchmark_report.py 
```
    **Compiler Settings in foundry.toml:**
    - Optimizer Runs: 20,000"
    - viaIR: Disabled
## facets() Function Gas Costs

| Selectors/Facets | CollisionMap | Current | Original | TwoPass |
|----------------|------------|-------|--------|-------|
| 0/0 | 1,872 | 14,905 | 1,704 | 1,868 |
| 2/1 | 7,113 | 18,521 | 5,141 | 7,044 |
| 4/2 | 2,002,259 | 26,576 | 674,897 | 1,341,893 |
| 6/3 | 4,127,056 | 40,380 | 1,392,113 | 2,767,859 |
| 20/7 | 20,974,429 | 575,507 | 7,377,392 | 14,251,087 |
| 40/10 | 53,292,677 | 592,928 | 18,255,992 | 35,992,573 |
| 40/20 | 107,100,677 | 1,248,509 | 37,646,564 | 72,705,033 |
| 50/17 | 113,419,540 | 3,406,974 | 40,951,162 | 77,537,218 |
| 64/16 | 132,015,937 | 1,721,190 | 46,323,850 | 89,519,925 |
| 64/32 | 268,107,775 | 3,907,351 | 105,068,490 | 183,336,797 |
| 64/64 | 554,269,712 | 9,665,932 | 358,049,613 | 385,034,379 |
| 100/34 | 444,475,719 | 16,083,806 | 195,926,198 | 306,807,256 |
| 500/167 | 12,759,480,804 | 6,496,743,155 | 412,743,917,999 | 9,486,080,192 |
| 504/42 | 2,710,860,693 | 476,372,860 | 2,988,018,906 | 1,880,773,196 |
| 1000/84 | 12,394,728,609 | 19,016,404,485 | 116,788,998,934 | 9,114,103,331 |
| 1000/334 | 70,959,700,966 | 287,329,088,060 | 25,222,727,047,768 | 57,917,542,433 |

---
## facetAddresses() Function Gas Costs

| Selectors/Facets | CollisionMap | Current | Original | TwoPass |
|----------------|------------|-------|--------|-------|
| 0/0 | 1,519 | 14,656 | 1,515 | 1,515 |
| 2/1 | 3,336 | 16,939 | 3,288 | 3,288 |
| 4/2 | 9,052 | 22,443 | 8,871 | 8,871 |
| 6/3 | 136,264 | 31,719 | 58,651 | 97,479 |
| 20/7 | 781,206 | 144,459 | 389,440 | 583,575 |
| 40/10 | 1,550,138 | 348,787 | 914,990 | 1,225,607 |
| 40/20 | 3,830,887 | 691,165 | 2,415,734 | 3,114,621 |
| 50/17 | 3,470,009 | 765,405 | 2,277,687 | 2,860,092 |
| 64/16 | 3,608,794 | 870,346 | 2,484,697 | 3,028,276 |
| 64/32 | 9,394,956 | 1,764,197 | 7,135,185 | 8,299,995 |
| 64/64 | 27,501,435 | 3,619,637 | 22,705,511 | 25,112,785 |
| 100/34 | 14,260,362 | 3,005,907 | 11,622,810 | 12,906,576 |
| 500/167 | 996,474,212 | 128,985,454 | 980,322,382 | 986,728,838 |
| 504/42 | 81,595,957 | 21,112,640 | 77,571,899 | 79,124,979 |
| 1000/84 | 550,598,312 | 126,709,951 | 540,077,601 | 543,261,415 |
| 1000/334 | 7,662,167,467 | 1,188,630,494 | 7,621,451,281 | 7,634,419,504 |

---
